<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fake News Detector</title>
<style>
body {font-family:sans-serif;background:#eef2ff;margin:0;padding:20px;}
.container {max-width:800px;margin:auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.1);}
textarea {width:100%;height:120px;padding:10px;font-size:1em;}
button {padding:10px 20px;margin:10px 0;background:#667eea;color:#fff;border:none;border-radius:6px;cursor:pointer;}
.metric-card,.flag-item{background:#f3f3f3;padding:10px;margin:5px 0;border-radius:6px;}
.green{color:#28a745}.orange{color:#ff9800}.red{color:#dc3545}
</style>
</head>
<body>
<div class="container">
  <h1>📰 Fake News Detector</h1>
  <p>Enter or paste your article text:</p>
  <textarea id="newsInput" placeholder="Type or paste text..."></textarea><br>
  <button onclick="analyzeNews()">Analyze</button>

  <div id="results" style="display:none">
    <h2 id="verdictLabel"></h2>
    <div id="scoreNumber" class="score-number"></div>
    <div id="metricsGrid"></div>
    <h3>🚩 Red Flags</h3>
    <div id="redFlags"></div>
  </div>
</div>

<script>
const indicators = {
  sensational:{keywords:['shocking','unbelievable','you won\'t believe','breaking','exclusive'],weight:2},
  emotional:{keywords:['furious','terrified','devastated','shocked'],weight:1.5},
  clickbait:{keywords:['click here','find out','secret','you need to see'],weight:2.5}
};

function analyzeNews(){
  const text=document.getElementById('newsInput').value.trim();
  if(text.length<10){alert("Please enter at least 10 characters.");return;}
  const result=performAnalysis(text);
  displayResults(result);
}

function performAnalysis(text){
  let fakeScore=0,foundIndicators={};
  for(const [cat,data] of Object.entries(indicators)){
    let count=0;
    data.keywords.forEach(k=>{
      const matches=text.match(new RegExp('\\b'+k.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')+'\\b','gi'));
      if(matches){count+=matches.length;}
    });
    if(count>0){foundIndicators[cat]={count,weight:data.weight};fakeScore+=count*data.weight;}
  }
  const words=text.split(/\s+/);
  const excessivePunct=(text.match(/[!?]{2,}/g)||[]).length;
  const capsWords=words.filter(w=>w.length>2 && w===w.toUpperCase()).length;
  const score=Math.min(100,Math.round(fakeScore*3+excessivePunct*5+capsWords));
  return{score,indicators:foundIndicators,wordCount:words.length,excessivePunct};
}

function displayResults(result){
  const verdict=document.getElementById('verdictLabel');
  const scoreNum=document.getElementById('scoreNumber');
  let verdictText,color;
  if(result.score<30){verdictText='✅ Likely Reliable';color='green';}
  else if(result.score<60){verdictText='⚠️ Questionable';color='orange';}
  else{verdictText='🚨 Likely Fake/Misleading';color='red';}
  verdict.textContent=verdictText;
  verdict.className=color;
  scoreNum.textContent=`Score: ${result.score}/100`;

  const metrics=document.getElementById('metricsGrid');
  metrics.innerHTML=`
    <div class="metric-card">Word Count: ${result.wordCount}</div>
    <div class="metric-card">Excessive Punctuation: ${result.excessivePunct}</div>`;

  const redFlags=document.getElementById('redFlags');
  redFlags.innerHTML='';
  for(const [cat,data] of Object.entries(result.indicators)){
    redFlags.innerHTML+=`<div class="flag-item">${cat.toUpperCase()}: Found ${data.count}x (Weight: ${data.weight})</div>`;
  }
  document.getElementById('results').style.display='block';
}
</script>
</body>
</html>
