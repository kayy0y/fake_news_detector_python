<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fake News Detector</title>
<style>
:root {
  --bg: #eef2ff;
  --text: #111;
  --card: #fff;
}
body.dark {
  --bg: #121212;
  --text: #f3f3f3;
  --card: #1e1e1e;
}
body {
  font-family: 'Segoe UI', sans-serif;
  background: var(--bg);
  color: var(--text);
  margin: 0;
  padding: 20px;
  transition: background 0.3s, color 0.3s;
}
.container {
  max-width: 800px;
  margin: auto;
  background: var(--card);
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
textarea {
  width: 100%;
  height: 120px;
  padding: 10px;
  font-size: 1em;
  border-radius: 6px;
  border: 1px solid #ccc;
  background: var(--bg);
  color: var(--text);
}
button {
  padding: 10px 20px;
  margin: 10px 5px;
  background: #667eea;
  color: #fff;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
button:hover { opacity: 0.9; }
.metric-card, .flag-item {
  background: rgba(100, 100, 255, 0.1);
  padding: 10px;
  margin: 5px 0;
  border-radius: 6px;
}
.green { color: #28a745; }
.orange { color: #ff9800; }
.red { color: #dc3545; }
.toggle {
  float: right;
  cursor: pointer;
  padding: 6px 12px;
  border-radius: 6px;
  background: #444;
  color: #fff;
  font-size: 0.9em;
}
</style>
</head>
<body>
<div class="container">
  <div style="display:flex;justify-content:space-between;align-items:center;">
    <h1>üì∞ Fake News Detector</h1>
    <span class="toggle" onclick="toggleMode()">üåô Dark Mode</span>
  </div>

  <p>Enter or paste your article text:</p>
  <textarea id="newsInput" placeholder="Type or paste text..."></textarea><br>

  <button onclick="analyzeNews()">Analyze</button>
  <button onclick="uploadFile()">üìÇ Upload File (PDF/PPT)</button>
  <button onclick="uploadImage()">üñº Upload Screenshot</button>
  <button onclick="recordVoice()">üéô Record Voice</button>
  <input type="file" id="fileInput" style="display:none" accept=".pdf,.ppt,.pptx,image/*">
  <audio id="audioPreview" controls style="display:none;margin-top:10px;"></audio>

  <div id="results" style="display:none">
    <h2 id="verdictLabel"></h2>
    <div id="scoreNumber" class="score-number"></div>
    <div id="metricsGrid"></div>
    <h3>üö© Red Flags</h3>
    <div id="redFlags"></div>
  </div>
</div>

<script>
const indicators = {
  sensational:{keywords:['shocking','unbelievable','you won\'t believe','breaking','exclusive'],weight:2},
  emotional:{keywords:['furious','terrified','devastated','shocked'],weight:1.5},
  clickbait:{keywords:['click here','find out','secret','you need to see'],weight:2.5}
};

function toggleMode(){
  document.body.classList.toggle('dark');
  const toggle=document.querySelector('.toggle');
  toggle.textContent=document.body.classList.contains('dark')?'‚òÄÔ∏è Light Mode':'üåô Dark Mode';
}

function analyzeNews(){
  const text=document.getElementById('newsInput').value.trim();
  if(text.length<10){alert("Please enter at least 10 characters.");return;}
  const result=performAnalysis(text);
  displayResults(result);
}

function performAnalysis(text){
  let fakeScore=0,foundIndicators={};
  for(const [cat,data] of Object.entries(indicators)){
    let count=0;
    data.keywords.forEach(k=>{
      const matches=text.match(new RegExp('\\b'+k.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')+'\\b','gi'));
      if(matches){count+=matches.length;}
    });
    if(count>0){foundIndicators[cat]={count,weight:data.weight};fakeScore+=count*data.weight;}
  }
  const words=text.split(/\s+/);
  const excessivePunct=(text.match(/[!?]{2,}/g)||[]).length;
  const capsWords=words.filter(w=>w.length>2 && w===w.toUpperCase()).length;
  const score=Math.min(100,Math.round(fakeScore*3+excessivePunct*5+capsWords));
  return{score,indicators:foundIndicators,wordCount:words.length,excessivePunct};
}

function displayResults(result){
  const verdict=document.getElementById('verdictLabel');
  const scoreNum=document.getElementById('scoreNumber');
  let verdictText,color;
  if(result.score<30){verdictText='‚úÖ Likely Reliable';color='green';}
  else if(result.score<60){verdictText='‚ö†Ô∏è Questionable';color='orange';}
  else{verdictText='üö® Likely Fake/Misleading';color='red';}
  verdict.textContent=verdictText;
  verdict.className=color;
  scoreNum.textContent=`Score: ${result.score}/100`;

  const metrics=document.getElementById('metricsGrid');
  metrics.innerHTML=`
    <div class="metric-card">Word Count: ${result.wordCount}</div>
    <div class="metric-card">Excessive Punctuation: ${result.excessivePunct}</div>`;

  const redFlags=document.getElementById('redFlags');
  redFlags.innerHTML='';
  for(const [cat,data] of Object.entries(result.indicators)){
    redFlags.innerHTML+=`<div class="flag-item">${cat.toUpperCase()}: Found ${data.count}x (Weight: ${data.weight})</div>`;
  }
  document.getElementById('results').style.display='block';
}

// --- File Upload Handlers ---
function uploadFile(){
  const input=document.getElementById('fileInput');
  input.accept='.pdf,.ppt,.pptx';
  input.onchange=()=>{
    const file=input.files[0];
    if(!file)return;
    alert(`File "${file.name}" selected. (Text extraction placeholder)`);
  };
  input.click();
}

function uploadImage(){
  const input=document.getElementById('fileInput');
  input.accept='image/*';
  input.onchange=()=>{
    const file=input.files[0];
    if(!file)return;
    alert(`Screenshot "${file.name}" uploaded. (OCR placeholder)`);
  };
  input.click();
}

let mediaRecorder, audioChunks=[];
function recordVoice(){
  if(mediaRecorder && mediaRecorder.state==='recording'){
    mediaRecorder.stop();
    return;
  }
  navigator.mediaDevices.getUserMedia({audio:true}).then(stream=>{
    mediaRecorder=new MediaRecorder(stream);
    mediaRecorder.start();
    alert("Recording started... speak now!");
    mediaRecorder.ondataavailable=e=>audioChunks.push(e.data);
    mediaRecorder.onstop=()=>{
      const audioBlob=new Blob(audioChunks,{type:'audio/wav'});
      const audioUrl=URL.createObjectURL(audioBlob);
      const audio=document.getElementById('audioPreview');
      audio.src=audioUrl;
      audio.style.display='block';
      alert("Recording complete. (Speech-to-text placeholder)");
    };
    setTimeout(()=>mediaRecorder.stop(),5000);
  }).catch(err=>{
    alert("Microphone access denied or unavailable.");
  });
}
</script>
</body>
</html>
